<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DXPool: dxpool::WorkerPool Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DXPool
   </div>
   <div id="projectbrief">An object and thread pool library for C++</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d5/d2a/classdxpool_1_1WorkerPool.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../d2/d33/classdxpool_1_1WorkerPool-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">dxpool::WorkerPool Class Reference<span class="mlabels"><span class="mlabel">final</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>A worker pool creates a static pool of threads with a given CPU affinity. The number of threads in the pool do not change during its lifetime.  
 <a href="../../d5/d2a/classdxpool_1_1WorkerPool.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../d6/d76/WorkerPool_8h_source.html">WorkerPool.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae45b004bfe1a6e6b1255b7e52556f964"><td class="memTemplParams" colspan="2">template&lt;typename Callable , typename Result , typename... Args&gt; </td></tr>
<tr class="memitem:ae45b004bfe1a6e6b1255b7e52556f964"><td class="memTemplItemLeft" align="right" valign="top">auto&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d5/d2a/classdxpool_1_1WorkerPool.html#ae45b004bfe1a6e6b1255b7e52556f964">Submit</a> (Callable &amp;&amp;task, Args &amp;&amp;... args) -&gt; std::future&lt; Result &gt;</td></tr>
<tr class="memdesc:ae45b004bfe1a6e6b1255b7e52556f964"><td class="mdescLeft">&#160;</td><td class="mdescRight">Submits a task for execution providing a promise that can be used to obtain a result generated by the task.  <a href="../../d5/d2a/classdxpool_1_1WorkerPool.html#ae45b004bfe1a6e6b1255b7e52556f964">More...</a><br /></td></tr>
<tr class="separator:ae45b004bfe1a6e6b1255b7e52556f964"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace5d35cdbb8163bd8cc7ab342930ae9f"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d2a/classdxpool_1_1WorkerPool.html#ace5d35cdbb8163bd8cc7ab342930ae9f">Submit</a> (<a class="el" href="../../df/d96/classdxpool_1_1WorkQueue.html#a8c1efce49c95a1b793276e5264c577f3">WorkQueue::WorkerTask</a> &amp;&amp;task) -&gt; void</td></tr>
<tr class="memdesc:ace5d35cdbb8163bd8cc7ab342930ae9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Submits at task for execution.  <a href="../../d5/d2a/classdxpool_1_1WorkerPool.html#ace5d35cdbb8163bd8cc7ab342930ae9f">More...</a><br /></td></tr>
<tr class="separator:ace5d35cdbb8163bd8cc7ab342930ae9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68b2f9e111b1748b34f2ea78f58fbd1d"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d2a/classdxpool_1_1WorkerPool.html#a68b2f9e111b1748b34f2ea78f58fbd1d">Size</a> () const -&gt; size_t</td></tr>
<tr class="memdesc:a68b2f9e111b1748b34f2ea78f58fbd1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the number of workers (threads) in the pool.  <a href="../../d5/d2a/classdxpool_1_1WorkerPool.html#a68b2f9e111b1748b34f2ea78f58fbd1d">More...</a><br /></td></tr>
<tr class="separator:a68b2f9e111b1748b34f2ea78f58fbd1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01704609d8960607d767b71bb3fdd932"><td class="memItemLeft" align="right" valign="top"><a id="a01704609d8960607d767b71bb3fdd932"></a>
auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d2a/classdxpool_1_1WorkerPool.html#a01704609d8960607d767b71bb3fdd932">Shutdown</a> () -&gt; void</td></tr>
<tr class="memdesc:a01704609d8960607d767b71bb3fdd932"><td class="mdescLeft">&#160;</td><td class="mdescRight">Waits for all workers to finish and stops all threads. <br /></td></tr>
<tr class="separator:a01704609d8960607d767b71bb3fdd932"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add2c525f893d36c454f3677c26217a15"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d2a/classdxpool_1_1WorkerPool.html#add2c525f893d36c454f3677c26217a15">HasWork</a> () -&gt; bool</td></tr>
<tr class="memdesc:add2c525f893d36c454f3677c26217a15"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determins if the pool has work to do by checking if there are items in the task list. Note that this doesn't mean all workers (threads) are idle, only that there are no tasks pending execution.  <a href="../../d5/d2a/classdxpool_1_1WorkerPool.html#add2c525f893d36c454f3677c26217a15">More...</a><br /></td></tr>
<tr class="separator:add2c525f893d36c454f3677c26217a15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a877295a75dbb382c56fa2936f13753ca"><td class="memItemLeft" align="right" valign="top"><a id="a877295a75dbb382c56fa2936f13753ca"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>FORBID_COPY_MOVE_ASSIGN</b> (<a class="el" href="../../d5/d2a/classdxpool_1_1WorkerPool.html">WorkerPool</a>)</td></tr>
<tr class="separator:a877295a75dbb382c56fa2936f13753ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4548043e1c9ee436ff3caba20b1c1d80"><td class="memItemLeft" align="right" valign="top"><a id="a4548043e1c9ee436ff3caba20b1c1d80"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d2a/classdxpool_1_1WorkerPool.html#a4548043e1c9ee436ff3caba20b1c1d80">~WorkerPool</a> ()</td></tr>
<tr class="memdesc:a4548043e1c9ee436ff3caba20b1c1d80"><td class="mdescLeft">&#160;</td><td class="mdescRight">When destructed, the worker pool will wait for all tasks to finish and stop (join) all threads. <br /></td></tr>
<tr class="separator:a4548043e1c9ee436ff3caba20b1c1d80"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A worker pool creates a static pool of threads with a given CPU affinity. The number of threads in the pool do not change during its lifetime. </p>
<p>Tasks can be submitted for execution via the methods Submit but will only be executed when one of the threads becomes available. This means tasks can starve or never be executed if threads are doing long duration processing, locked or in an infinite loop.</p>
<p>Worker threads will lock and wait until there's work to do.</p>
<p>A <a class="el" href="../../d5/d2a/classdxpool_1_1WorkerPool.html" title="A worker pool creates a static pool of threads with a given CPU affinity. The number of threads in th...">WorkerPool</a> instance can only be create via the <a class="el" href="../../da/d3c/classdxpool_1_1WorkerPoolBuilder.html" title="Builder for worker pool.">WorkerPoolBuilder</a> </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="add2c525f893d36c454f3677c26217a15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add2c525f893d36c454f3677c26217a15">&#9670;&nbsp;</a></span>HasWork()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto dxpool::WorkerPool::HasWork </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> -&gt; bool </td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determins if the pool has work to do by checking if there are items in the task list. Note that this doesn't mean all workers (threads) are idle, only that there are no tasks pending execution. </p>
<dl class="section return"><dt>Returns</dt><dd>true if the pool has work to do </dd>
<dd>
false otherwise </dd></dl>

</div>
</div>
<a id="a68b2f9e111b1748b34f2ea78f58fbd1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68b2f9e111b1748b34f2ea78f58fbd1d">&#9670;&nbsp;</a></span>Size()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto dxpool::WorkerPool::Size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const -&gt; size_t </td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the number of workers (threads) in the pool. </p>
<dl class="section return"><dt>Returns</dt><dd>size_t number of workers in the pool </dd></dl>

</div>
</div>
<a id="ae45b004bfe1a6e6b1255b7e52556f964"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae45b004bfe1a6e6b1255b7e52556f964">&#9670;&nbsp;</a></span>Submit() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Callable , typename Result , typename... Args&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto dxpool::WorkerPool::Submit </td>
          <td>(</td>
          <td class="paramtype">Callable &amp;&amp;&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Args &amp;&amp;...&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> -&gt; std::future&lt;Result&gt; </td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Submits a task for execution providing a promise that can be used to obtain a result generated by the task. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Callable</td><td>type of the task </td></tr>
    <tr><td class="paramname">Result</td><td>type of the result returned </td></tr>
    <tr><td class="paramname">Args</td><td>type of the arguments to be passed to the task </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>the task to be executed </td></tr>
    <tr><td class="paramname">args</td><td>arguments to be passed to the task </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>std::future&lt;Result&gt; future containing a result generated by the task </dd></dl>

</div>
</div>
<a id="ace5d35cdbb8163bd8cc7ab342930ae9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace5d35cdbb8163bd8cc7ab342930ae9f">&#9670;&nbsp;</a></span>Submit() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto dxpool::WorkerPool::Submit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/d96/classdxpool_1_1WorkQueue.html#a8c1efce49c95a1b793276e5264c577f3">WorkQueue::WorkerTask</a> &amp;&amp;&#160;</td>
          <td class="paramname"><em>task</em></td><td>)</td>
          <td> -&gt; void </td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Submits at task for execution. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>to be executed </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/<a class="el" href="../../d6/d76/WorkerPool_8h_source.html">WorkerPool.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>dxpool</b></li><li class="navelem"><a class="el" href="../../d5/d2a/classdxpool_1_1WorkerPool.html">WorkerPool</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
